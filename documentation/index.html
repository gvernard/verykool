<html><head><meta charset="UTF-8"><link rel="stylesheet" href="css/index.css"><script src="https://code.jquery.com/jquery-1.12.4.js"></script><script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script type="text/javascript" src="js/index.js"></script></head><body><h2>Creating lenses</h2><form id="myform"><div id="tabs" class="container"><ul class="tabs"><li class="tab-link" data-tab="source_div">Source</li><li class="tab-link current" data-tab="lens_div">Lens</li><li class="tab-link" data-tab="observer_div">Observer</li></ul><div id="source_div" class="tab-content"><div class="slot"><p class="title">Source</p><select class="myselect" id="source"><option disabled selected="selected">Select option</option><option value="analytic">Analytic</option><option value="fromfits">From .fits file</option><option value="delaunay">Irregular grid</option></select><div class="myselect_option analytic"><p class="legend">Select an analytic profile for the source</p><hr class="myhr"><div id="anal-source-1" class="anal-source"><h4>Analytic Source 1</h4><button type="button" class="remove_source">Remove</button><select class="myselect" id="analytic"><option disabled selected="selected">Select option</option><option value="gauss">Gauss</option><option value="sersic">Sersic</option></select><div class="myselect_option gauss" ><p class="legend">2D Gaussian distribution</p><table class="input_table" id="gauss"><tr><td><label>x<sub>0</sub></label></td><td><input name="x0" type="number"  /></td><td><p class="legend">Source center abscissa in arcsec</p></td></tr><tr><td><label>y<sub>0</sub></label></td><td><input name="y0" type="number"  /></td><td><p class="legend">Source center ordinate in arcsec</p></td></tr><tr><td><label>q</label></td><td><input name="q" type="number" min="0" max="1"  /></td><td><p class="legend">Axis ratio (minor/major, major is always on the x-axis)</p></td></tr><tr><td><label>pa</label></td><td><input name="pa" type="number"  /></td><td><p class="legend">Position angle of the major axis (degrees, east of north)</p></td></tr><tr><td><label>I<sub>0</sub></label></td><td><input name="i_eff" type="number" min="0"  /></td><td><p class="legend">Scaling factor for the profile brightness (value at the central pixel)</p></td></tr><tr><td><label>&sigma;</label></td><td><input name="r_eff" type="number" min="0"  /></td><td><p class="legend">Standard deviation on the x-axis</p></td></tr></table></div><div class="myselect_option sersic" ><p class="legend">2D Sersic profile</p><table class="input_table" id="sersic"><tr><td><label>x<sub>0</sub></label></td><td><input name="x0" type="number"  /></td><td><p class="legend">Source center abscissa in arcsec</p></td></tr><tr><td><label>y<sub>0</sub></label></td><td><input name="y0" type="number"  /></td><td><p class="legend">Source center ordinate in arcsec</p></td></tr><tr><td><label>q</label></td><td><input name="q" type="number" min="0" max="1"  /></td><td><p class="legend">Axis ratio (minor/major, major is always on the x-axis)</p></td></tr><tr><td><label>pa</label></td><td><input name="pa" type="number"  /></td><td><p class="legend">Position angle of the major axis (degrees, east of north)</p></td></tr><tr><td><label>I<sub>0</sub></label></td><td><input name="i_eff" type="number" min="0"  /></td><td><p class="legend">Scaling factor for the profile brightness (value at the central pixel)</p></td></tr><tr><td><label>&sigma;</label></td><td><input name="r_eff" type="number" min="0"  /></td><td><p class="legend">Standard deviation on the x-axis</p></td></tr><tr><td><label>n</label></td><td><input name="n" type="number" min="0"  /></td><td><p class="legend">Sersic index</p></td></tr></table></div><hr class="myhr"></div><button type="button" id="add_source">Add source</button></div><div class="myselect_option fromfits"><p class="legend">Upload a .fits image of the source</p><table class="input_table" id="fromfits"><tr><td><label>filename</label></td><td><input name="filename" type="file"  /></td><td><p class="legend">Select a .fits file for the source</p></td></tr><tr><td><label>N<sub>j</sub></label></td><td><input name="Nj" type="number" step="1"  /></td><td><p class="legend">Pixel resolution in x</p></td></tr><tr><td><label>N<sub>i</sub></label></td><td><input name="Ni" type="number" step="1"  /></td><td><p class="legend">Pixel resolution in y</p></td></tr><tr><td><label>W</label></td><td><input name="width" type="number" min="0"  /></td><td><p class="legend">Width of the image in arcsec</p></td></tr><tr><td><label>H</label></td><td><input name="height" type="number" min="0"  /></td><td><p class="legend">Height of the image in arcsec</p></td></tr><tr><td><label>x<sub>0</sub></label></td><td><input name="x0" type="number"  /></td><td><p class="legend">Source center abscissa in arcsec</p></td></tr><tr><td><label>y<sub>0</sub></label></td><td><input name="y0" type="number"  /></td><td><p class="legend">Source center ordinate in arcsec</p></td></tr></table></div><div class="myselect_option delaunay"><p class="legend">Upload an irregular brightness grid (abscissa,ordinate,brightness)</p><table class="input_table" id="delaunay"><tr><td><label>filename</label></td><td><input name="filename" type="file"  /></td><td><p class="legend">Select a file with an irregular grid for the source.</br>Each line must have: the coordinates and the brightness of each grid point, separated by whitespace.</p></td></tr></table></div></div></div><div id="lens_div" class="tab-content current"><div class="slot"><p class="title">Lenses</p><table class="input_table nlpars" id="physical"><thead><th>&nbsp;</th><th>&nbsp;</th><th>Value</th><th>&nbsp;</th></thead><tr><td><label>&gamma;</label></td><td><input type="hidden" name="g_nam" class="nlpar_value" value="g" /></td><td><input type="number" step="any" name="g_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Magnitude of the external shear</p></td></tr><tr><td><label>&phi;</label></td><td><input type="hidden" name="phi_nam" class="nlpar_value" value="phi" /></td><td><input type="number" step="any" name="phi_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Direction of the external shear (degrees, east of north)</p></td></tr></table><hr class="myhr"><div id="lens-1" class="lens"><h4>Lens 1</h4><button type="button" class="remove_lens">Remove</button><select class="myselect" id="lenses"><option disabled selected="selected">Select option</option><option value="sie">SIE</option><option value="spemd">SPEMD</option></select><div class="myselect_option sie" ><p class="legend">Singular Isothermal Ellipsoid.</p><table class="input_table nlpars" id="sie"><thead><th>&nbsp;</th><th>&nbsp;</th><th>Value</th><th>&nbsp;</th></thead><tr><td><label>b</label></td><td><input type="hidden" name="b_nam" class="nlpar_value" value="b" /></td><td><input type="number" step="any" name="b_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Einstein radius in arcsec</p></td></tr><tr><td><label>q</label></td><td><input type="hidden" name="q_nam" class="nlpar_value" value="q" /></td><td><input type="number" step="any" name="q_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Axis ratio (minor/major, major is always on the x-axis)</p></td></tr><tr><td><label>pa</label></td><td><input type="hidden" name="pa_nam" class="nlpar_value" value="pa" /></td><td><input type="number" step="any" name="pa_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Position angle of the major axis (degrees, east of north)</p></td></tr><tr><td><label>x<sub>0</sub></label></td><td><input type="hidden" name="x0_nam" class="nlpar_value" value="x0" /></td><td><input type="number" step="any" name="x0_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Lens center abscissa in arcsec</p></td></tr><tr><td><label>y<sub>0</sub></label></td><td><input type="hidden" name="y0_nam" class="nlpar_value" value="y0" /></td><td><input type="number" step="any" name="y0_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Lens center ordinate in arcsec</p></td></tr></table></div><div class="myselect_option spemd" ><p class="legend">Softened Power-law Elliptical Mass Distribution.</p><table class="input_table nlpars" id="spemd"><thead><th>&nbsp;</th><th>&nbsp;</th><th>Value</th><th>&nbsp;</th></thead><tr><td><label>b</label></td><td><input type="hidden" name="b_nam" class="nlpar_value" value="b" /></td><td><input type="number" step="any" name="b_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Einstein radius in arcsec</p></td></tr><tr><td><label>q</label></td><td><input type="hidden" name="q_nam" class="nlpar_value" value="q" /></td><td><input type="number" step="any" name="q_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Axis ratio (minor/major, major is always on the x-axis)</p></td></tr><tr><td><label>pa</label></td><td><input type="hidden" name="pa_nam" class="nlpar_value" value="pa" /></td><td><input type="number" step="any" name="pa_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Position angle of the major axis (degrees, east of north)</p></td></tr><tr><td><label>x<sub>0</sub></label></td><td><input type="hidden" name="x0_nam" class="nlpar_value" value="x0" /></td><td><input type="number" step="any" name="x0_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Lens center abscissa in arcsec</p></td></tr><tr><td><label>y<sub>0</sub></label></td><td><input type="hidden" name="y0_nam" class="nlpar_value" value="y0" /></td><td><input type="number" step="any" name="y0_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Lens center ordinate in arcsec</p></td></tr><tr><td><label>e</label></td><td><input type="hidden" name="e_nam" class="nlpar_value" value="e" /></td><td><input type="number" step="any" name="e_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Exponent</p></td></tr><tr><td><label>s</label></td><td><input type="hidden" name="s_nam" class="nlpar_value" value="s" /></td><td><input type="number" step="any" name="s_val" class="nlpar_value" placeholder="Value" /></td><td><p class="legend">Core radius in arcsec</p></td></tr></table></div><hr class="myhr"></div><button type="button" id="add_lens">Add lens</button></div><div class="slot"><p class="title">Perturbations</p><select class="myselect" id="perturbations"><option disabled selected="selected">Select option</option><option value="grf">GRF</option><option value="upload">upload</option></select><div class="myselect_option grf" ><p class="legend">Gaussian Random Field.</p><table class="input_table" id="grf"><tr><td><label>slope</label></td><td><input name="slope" type="number"  /></td><td><p class="legend">Slope of the power spectrum</p></td></tr><tr><td><label>log<sub>10</sub>(var)</label></td><td><input name="logvar" type="number"  /></td><td><p class="legend">Logarithm of the variance of the random field</p></td></tr><tr><td><label>seed</label></td><td><input name="seed" type="number" step="1"  /></td><td><p class="legend">Seed for the random number generator</p></td></tr><tr><td><label>N<sub>j</sub></label></td><td><input name="Nj" type="number" step="1"  /></td><td><p class="legend">Width of the perturbations field in pixels</p></td></tr><tr><td><label>N<sub>i</sub></label></td><td><input name="Ni" type="number" step="1"  /></td><td><p class="legend">Height of the perturbations field in pixels</p></td></tr></table></div><div class="myselect_option upload" ><p class="legend">Custom perturbations.</p><table class="input_table" id="upload"><tr><td><label>file</label></td><td><input name="file" type="file"  /></td><td><p class="legend">Upload a file with &delta;&psi;</p></td></tr></table></div></div><div class="slot"><p class="title">Generic options</p><table class="input_table" id="print_all"><tr><td><label>Print all</label></td><td><input name="print_all" type="checkbox"  /></td><td><p class="legend">Print intermediate files from FProject</p></td></tr></table></div></div><div id="observer_div" class="tab-content"><div class="slot"><p class="title">Field of view</p><table class="input_table" id="iplane"><tr><td><label>D<sub>x</sub></label></td><td><input name="pix_x" type="number" step="1"  /></td><td><p class="legend">Image width in pixels</p></td></tr><tr><td><label>D<sub>y</sub></label></td><td><input name="pix_y" type="number" step="1"  /></td><td><p class="legend">Image height in pixels</p></td></tr><tr><td><label>W</label></td><td><input name="width" type="number"  /></td><td><p class="legend">Image width in arcsec</p></td></tr><tr><td><label>H</label></td><td><input name="height" type="number"  /></td><td><p class="legend">Image height in arcsec</p></td></tr><tr><td></td><td><input name="inf_x" type="hidden" value="1500"  /></td><td></td></tr><tr><td></td><td><input name="inf_y" type="hidden" value="1500"  /></td><td></td></tr></table></div><div class="slot"><p class="title">PSF</p><table class="input_table" id="psf"><tr><td><label>PSF</label></td><td><input name="psfpath" type="file"  /></td><td><p class="legend">File (.fits) containing the point spread function (same pixel size as the image)</p></td></tr><tr><td><label>P<sub>x</sub></label></td><td><input name="pix_x" type="number" step="1"  /></td><td><p class="legend">Width of the PSF in pixels</p></td></tr><tr><td><label>P<sub>y</sub></label></td><td><input name="pix_y" type="number" step="1"  /></td><td><p class="legend">Height of the PSF in pixels</p></td></tr><tr><td><label>C<sub>x</sub></label></td><td><input name="crop_x" type="number" step="1"  /></td><td><p class="legend">X-size of the central region to crop</p></td></tr><tr><td><label>C<sub>y</sub></label></td><td><input name="crop_y" type="number" step="1"  /></td><td><p class="legend">Y-size of the central region to crop</p></td></tr></table></div><div class="slot"><p class="title">Noise</p><select class="myselect" id="noise"><option disabled selected="selected">Select option</option><option value="uniform">Uniform</option><option value="noise_map">Noise map</option><option value="noise_realization">Noise realization</option></select><div class="myselect_option uniform" ><p class="legend">Uniform noise drawn from the same Gaussian distribution (&sigma; determined by S/N below)</p><table class="input_table" id="uniform"><tr><td><label>seed</label></td><td><input name="seed" type="number" step="1"  /></td><td><p class="legend">Seed for the random number generator</p></td></tr><tr><td><label>S/N</label></td><td><input name="sn" type="number"  /></td><td><p class="legend">Signal to noise ratio at the maximum lensed image brightness</p></td></tr></table></div><div class="myselect_option noise_map" ><p class="legend">An image, 'map', of the individual &sigma; per pixel, assuming Gaussian noise</p><table class="input_table" id="noise_map"><tr><td><label>filename</label></td><td><input name="filename" type="file"  /></td><td><p class="legend">File (.fits) containing the standard deviation for the noise in each pixel</p></td></tr></table></div><div class="myselect_option noise_realization" ><p class="legend">A specific realization of the noise (brightness values)</p><table class="input_table" id="noise_realization"><tr><td><label>Noise map</label></td><td><input name="noise_map" type="file"  /></td><td><p class="legend">File (.fits) containing the standard deviation for the noise in each pixel</p></td></tr><tr><td><label>Noise realization</label></td><td><input name="file" type="file"  /></td><td><p class="legend">File (.fits) containing a specific noise realization for each pixel</p></td></tr><tr><td><label>factor</label></td><td><input name="factor" type="number" min="0"  /></td><td><p class="legend">Optional factor to scale the noise realization</p></td></tr></table></div></div><div class="slot"><p class="title">Mask</p><select class="myselect" id="mask"><option disabled selected="selected">Select option</option><option value="automatic">Automatic</option><option value="upload">Upload</option></select><div class="myselect_option automatic" ><p class="legend">Produce a mask automatically</p><table class="input_table" id="automatic"><tr><td><label>Smear factor</label></td><td><input name="smear" type="number"  /></td><td><p class="legend">Smear the resulting image brightness by a 2-d Gaussian filter of this size (in arcsec)</p></td></tr><tr><td><label>Threshold</label></td><td><input name="threshold" type="number"  /></td><td><p class="legend">Accept pixels above this threshold in brightness after smearing</p></td></tr></table></div><div class="myselect_option upload" ><p class="legend">Upload an existing mask</p><table class="input_table" id="upload"><tr><td><label>Mask</label></td><td><input name="maskpath" type="file"  /></td><td><p class="legend">File (.fits) containing the mask (same pixel size as the image)</p></td></tr></table></div></div></div></div></form><button type="button" id="create">Create!</button><pre id="json"></pre></body></html>